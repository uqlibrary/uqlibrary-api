<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="uqlibrary-api.html">

<!--
Element providing computer availability.

##### Example

    <uqlibrary-api-computer-availability></uqlibrary-api-computer-availability>

@element uqlibrary-api-computer-availability
@blurb Element providing computer availability.
@status alpha
@homepage https://github.com/uqlibrary/uqlibrary-api
-->
<dom-module id="uqlibrary-api-computer-availability">
  <template>
    <uqlibrary-api id="computers" uri="/computer_availability"></uqlibrary-api>
  </template>
  <script>
    (function () {
      Polymer({
        is: 'uqlibrary-api-computer-availability',
        properties: {
          baseUri: {
            type: String,
            value: '/computer_availability'
          }
        },
        created: function () {
        },
        ready: function () {
          var that = this;
          this.$.computers.addEventListener('uqlibrary-api', function (e) {
            that.computers = e.detail;
            that.fire('uqlibrary-api-computer-availability-loaded', that.computers);
          });
        },
        /**
         * Gets the computer availability.
         *
         * @method get
         */
        get: function () {
          this.set('$.computers.uri', this.baseUri);
          this.$.computers.get();
        }
      });
    }());
  </script>
</dom-module>
